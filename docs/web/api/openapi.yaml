openapi: 3.1.0
info:
  description: API documentation for cities-svc
  title: cities-svc API
  version: 0.1.0
servers:
- url: /
paths:
  /test:
    post:
      description: Test
      responses:
        "201":
          description: successfully
      tags:
      - Test
components:
  schemas:
    CreateCountry:
      properties:
        data:
          $ref: '#/components/schemas/CreateCountry_data'
      required:
      - data
    UpdateCountry:
      properties:
        data:
          $ref: '#/components/schemas/UpdateCountry_data'
      required:
      - data
    UpdateCountryStatus:
      properties:
        data:
          $ref: '#/components/schemas/UpdateCountryStatus_data'
      required:
      - data
    CreateCity:
      properties:
        data:
          $ref: '#/components/schemas/CreateCity_data'
      required:
      - data
    UpdateCity:
      properties:
        data:
          $ref: '#/components/schemas/UpdateCity_data'
      required:
      - data
    UpdateCityStatus:
      properties:
        data:
          $ref: '#/components/schemas/UpdateCityStatus_data'
      required:
      - data
    UpdateOwnActiveGov:
      properties:
        data:
          $ref: '#/components/schemas/UpdateOwnActiveGov_data'
      required:
      - data
    CreateMayor:
      properties:
        data:
          $ref: '#/components/schemas/CreateMayor_data'
      required:
      - data
    SentInvite:
      properties:
        data:
          $ref: '#/components/schemas/SentInvite_data'
      required:
      - data
    TransferMayor:
      properties:
        data:
          $ref: '#/components/schemas/TransferMayor_data'
      required:
      - data
    CreateInvite:
      properties:
        data:
          $ref: '#/components/schemas/CreateInvite_data'
      required:
      - data
    Country:
      properties:
        data:
          $ref: '#/components/schemas/CountryData'
      required:
      - data
    CountryData:
      properties:
        id:
          description: country id
          format: uuid
          type: string
        type:
          enum:
          - country
          type: string
        attributes:
          $ref: '#/components/schemas/CountryAttributes'
      required:
      - attributes
      - id
      - type
    CountryAttributes:
      properties:
        name:
          description: country name
          type: string
        status:
          description: country status
          enum:
          - active
          - inactive
          type: string
        created_at:
          description: creation date
          format: date-time
          type: string
        updated_at:
          description: last update date
          format: date-time
          type: string
      required:
      - created_at
      - name
      - status
      - updated_at
    CountriesCollection:
      properties:
        data:
          items:
            $ref: '#/components/schemas/CountryData'
          type: array
        links:
          $ref: '#/components/schemas/PaginationData'
      required:
      - data
      - links
    City:
      properties:
        data:
          $ref: '#/components/schemas/CityData'
      required:
      - data
    CityData:
      properties:
        id:
          description: city id
          format: uuid
          type: string
        type:
          enum:
          - city
          type: string
        attributes:
          $ref: '#/components/schemas/CityAttributes'
      required:
      - attributes
      - id
      - type
    CityAttributes:
      properties:
        country_id:
          description: country id
          format: uuid
          type: string
        point:
          $ref: '#/components/schemas/Point'
        status:
          description: city status
          enum:
          - active
          - inactive
          type: string
        name:
          description: city name
          type: string
        icon:
          description: city icon uri
          format: uri
          type: string
        slug:
          description: city slug
          type: string
        timezone:
          description: city timezone
          type: string
        created_at:
          description: creation date
          format: date-time
          type: string
        updated_at:
          description: last update date
          format: date-time
          type: string
      required:
      - country_id
      - created_at
      - name
      - point
      - status
      - timezone
      - updated_at
    CitiesCollection:
      properties:
        data:
          items:
            $ref: '#/components/schemas/CityData'
          type: array
        links:
          $ref: '#/components/schemas/PaginationData'
      required:
      - data
      - links
    CityAdmin:
      properties:
        data:
          $ref: '#/components/schemas/CityAdminData'
      required:
      - data
    CityAdminData:
      properties:
        id:
          description: user id
          format: uuid
          type: string
        type:
          enum:
          - city_moderator
          type: string
        attributes:
          $ref: '#/components/schemas/CityAdminAttributes'
      required:
      - attributes
      - id
      - type
    CityAdminAttributes:
      properties:
        city_id:
          description: city id
          format: uuid
          type: string
        role:
          description: role of the user in this city
          type: string
        label:
          description: optional label for the user in this city
          type: string
        created_at:
          description: record creation date
          format: date-time
          type: string
        updated_at:
          description: last update date
          format: date-time
          type: string
      required:
      - city_id
      - created_at
      - role
      - updated_at
    CityAdminsCollection:
      properties:
        data:
          items:
            $ref: '#/components/schemas/CityAdminData'
          type: array
        links:
          $ref: '#/components/schemas/PaginationData'
      required:
      - data
      - links
    Invite:
      properties:
        data:
          $ref: '#/components/schemas/Invite_data'
      required:
      - data
    Errors:
      description: Standard JSON:API error
      properties:
        errors:
          description: Non empty array of errors occurred during request processing
          items:
            $ref: '#/components/schemas/Errors_errors_inner'
          type: array
      required:
      - errors
    PaginationData:
      properties:
        page_number:
          description: The current page number.
          example: 1
          format: int64
          type: integer
        page_size:
          description: The number of items per page.
          example: 10
          format: int64
          type: integer
        total_items:
          description: The total number of items available.
          example: 100
          format: int64
          type: integer
      required:
      - page_number
      - page_size
      - total_items
    Point:
      description: city location
      properties:
        latitude:
          description: latitude
          format: double
          type: number
        longitude:
          description: longitude
          format: double
          type: number
      required:
      - latitude
      - longitude
    CreateCountry_data_attributes:
      properties:
        name:
          description: city name
          type: string
      required:
      - name
    CreateCountry_data:
      properties:
        type:
          enum:
          - create_country
          type: string
        attributes:
          $ref: '#/components/schemas/CreateCountry_data_attributes'
      required:
      - attributes
      - type
    UpdateCountry_data_attributes:
      properties:
        name:
          description: city name
          type: string
    UpdateCountry_data:
      properties:
        id:
          description: country id
          format: uuid
          type: string
        type:
          enum:
          - update_country
          type: string
        attributes:
          $ref: '#/components/schemas/UpdateCountry_data_attributes'
      required:
      - attributes
      - id
      - type
    UpdateCountryStatus_data_attributes:
      properties:
        status:
          description: new country status
          type: string
      required:
      - status
    UpdateCountryStatus_data:
      properties:
        id:
          description: country id
          format: uuid
          type: string
        type:
          enum:
          - update_country_status
          type: string
        attributes:
          $ref: '#/components/schemas/UpdateCountryStatus_data_attributes'
      required:
      - attributes
      - id
      - type
    CreateCity_data_attributes:
      properties:
        country_id:
          description: country id
          format: uuid
          type: string
        name:
          description: city name
          type: string
        point:
          $ref: '#/components/schemas/Point'
        timezone:
          description: city timezone
          example: Europe/Berlin
          type: string
      required:
      - country_id
      - name
      - point
      - timezone
    CreateCity_data:
      properties:
        type:
          enum:
          - create_city
          type: string
        attributes:
          $ref: '#/components/schemas/CreateCity_data_attributes'
      required:
      - attributes
      - type
    UpdateCity_data_attributes:
      properties:
        point:
          $ref: '#/components/schemas/Point'
        status:
          description: city status
          enum:
          - active
          - inactive
          type: string
        name:
          description: city name
          type: string
        icon:
          description: city icon uri
          format: uri
          type: string
        slug:
          description: city slug
          type: string
        timezone:
          description: city timezone
          type: string
    UpdateCity_data:
      properties:
        id:
          description: city id
          format: uuid
          type: string
        type:
          enum:
          - update_city
          type: string
        attributes:
          $ref: '#/components/schemas/UpdateCity_data_attributes'
      required:
      - attributes
      - id
      - type
    UpdateCityStatus_data_attributes:
      properties:
        status:
          description: new city status
          type: string
      required:
      - status
    UpdateCityStatus_data:
      properties:
        id:
          description: city id
          format: uuid
          type: string
        type:
          enum:
          - update_city
          type: string
        attributes:
          $ref: '#/components/schemas/UpdateCityStatus_data_attributes'
      required:
      - attributes
      - id
      - type
    UpdateOwnActiveGov_data_attributes:
      properties:
        label:
          description: optional label for the user in this city
          type: string
    UpdateOwnActiveGov_data:
      properties:
        id:
          description: user id
          format: uuid
          type: string
        type:
          enum:
          - update_own_gov
          type: string
        attributes:
          $ref: '#/components/schemas/UpdateOwnActiveGov_data_attributes'
      required:
      - attributes
      - id
      - type
    CreateMayor_data_attributes:
      properties:
        city_id:
          description: city id
          format: uuid
          type: string
        user_id:
          description: user id
          format: uuid
          type: string
        label:
          description: label for the user in this city
          example: City Department of Transportation
          type: string
      required:
      - city_id
      - label
      - user_id
    CreateMayor_data:
      properties:
        type:
          enum:
          - create_mayor
          type: string
        attributes:
          $ref: '#/components/schemas/CreateMayor_data_attributes'
      required:
      - attributes
      - type
    SentInvite_data_attributes:
      properties:
        city_id:
          description: ID of the city the invite is for
          format: uuid
          type: string
        role:
          description: Role assigned to the invited user
          type: string
      required:
      - city_id
      - role
    SentInvite_data:
      properties:
        id:
          description: invite id
          format: uuid
          type: string
        type:
          enum:
          - sent_invite
          type: string
        attributes:
          $ref: '#/components/schemas/SentInvite_data_attributes'
      required:
      - attributes
      - id
      - type
    TransferMayor_data_attributes:
      properties:
        user_id:
          description: ID of the user to be assigned as the new mayor
          format: uuid
          type: string
      required:
      - user_id
    TransferMayor_data:
      properties:
        id:
          description: invite id
          format: uuid
          type: string
        type:
          enum:
          - transfer_mayor
          type: string
        attributes:
          $ref: '#/components/schemas/TransferMayor_data_attributes'
      required:
      - attributes
      - id
      - type
    CreateInvite_data_attributes:
      properties:
        user_id:
          description: user id
          format: uuid
          type: string
        role:
          description: role of the user in this city
          example: admin
          type: string
        label:
          description: label for the user in this city
          example: City Department of Transportation
          type: string
      required:
      - label
      - role
      - user_id
    CreateInvite_data:
      properties:
        type:
          enum:
          - create_gov
          type: string
        attributes:
          $ref: '#/components/schemas/CreateInvite_data_attributes'
      required:
      - attributes
      - type
    Invite_data_attributes:
      properties:
        status:
          description: status of the invite
          type: string
        role:
          description: role of the user in this city
          type: string
        city_id:
          description: city id
          format: uuid
          type: string
        token:
          description: unique token for the invite
          type: string
        expires_at:
          description: timestamp when the invite will expire
          format: date-time
          type: string
        created_at:
          description: timestamp when the invite was created
          format: date-time
          type: string
      required:
      - city_id
      - created_at
      - expires_at
      - role
      - status
      - token
    Invite_data:
      properties:
        id:
          description: invite id
          format: uuid
          type: string
        type:
          enum:
          - invite_city_gov
          type: string
        attributes:
          $ref: '#/components/schemas/Invite_data_attributes'
      required:
      - attributes
      - id
      - type
    Errors_errors_inner:
      properties:
        title:
          description: "Title is a short, human-readable summary of the problem"
          example: Bad Request
          type: string
        detail:
          description: Detail is a human-readable explanation specific to this occurrence
            of the problem
          example: Request body was expected
          type: string
        status:
          description: Status is the HTTP status code applicable to this problem
          enum:
          - 400
          - 401
          - 403
          - 404
          - 409
          - 500
          example: 400
          type: integer
      required:
      - status
      - title
